@import "tailwindcss";
@theme {
  /* Coral calm palette */
  /* Brand - Primary (corallo/terracotta, toni soft) */
  --color-primary-50:  #FFF4F3;
  --color-primary-100: #FFE6E3;
  --color-primary-200: #F9D1CD;
  --color-primary-300: #F2B9B3;
  --color-primary-400: #E89F96;
  --color-primary-500: #DD857B; /* base */
  --color-primary-600: #CF7066;
  --color-primary-700: #B45B52;
  --color-primary-800: #934944;
  --color-primary-900: #6F3734;
  --color-primary: var(--color-primary-500);

  /* Accent (pesca/peach soft) */
  --color-accent-50:  #FFF7F2;
  --color-accent-100: #FFEBDD;
  --color-accent-200: #FFD8BF;
  --color-accent-300: #FBC4A6;
  --color-accent-400: #F2B291;
  --color-accent-500: #E79E7A; /* base */
  --color-accent-600: #D1896A;
  --color-accent-700: #B06F57;
  --color-accent-800: #8D5946;
  --color-accent-900: #6D4638;
  --color-accent: var(--color-accent-500);

  /* Warm neutrals */
  --color-neutral-50:  #FAF7F6;
  --color-neutral-100: #F4F0EE;
  --color-neutral-200: #EAE4E1;
  --color-neutral-300: #DCD3D0;
  --color-neutral-400: #C8BDBA;
  --color-neutral-500: #A89D99;
  --color-neutral-600: #8A7F7B;
  --color-neutral-700: #6D6461;
  --color-neutral-800: #4F4846;
  --color-neutral-900: #362F2D;

  /* App tokens */
  --color-bg: var(--color-neutral-50);
  --color-bg-soft: var(--color-neutral-100);
  --color-surface: #FFFFFF;
  --color-surface-2: #FBF9F8;
  --color-border: #E9E1DF;
  --color-outline: #D8CFCC;

  --color-foreground: #2F2624;
  --color-muted-foreground: var(--color-neutral-700);
  --color-heading: #241C1A;
  --color-link: var(--color-primary-600);

  /* Helpful RGB tokens for translucency */
  --color-surface-rgb: 255 255 255;
  --color-foreground-rgb: 47 38 36;
  --color-primary-rgb: 221 133 123;

  /* Gradients */
  --gradient-brand: linear-gradient(90deg, var(--color-primary-300), var(--color-primary-500));
  --gradient-accent: linear-gradient(90deg, var(--color-accent-300), var(--color-accent-500));
}

/* Viewport var (kept for potential use, but not forcing layout) */
:root { --vh: 1vh; }
@supports (height: 1dvh) {
  :root { --vh: 1dvh; }
}

/* Restore normal document scrolling */
html, body {
  overscroll-behavior: none;
  overflow: auto;
  min-height: 100%;
  background: var(--color-bg);
  color: var(--color-foreground);
}
html { scroll-behavior: smooth; }

/* Remove snap container rules (no-op if present) */
[data-snap-container] {
  height: auto;
  overflow: visible;
}
[data-snap-container] > section {
  min-height: auto;
  scroll-snap-align: none;
  scroll-snap-stop: normal;
}

/* Avoid horizontal overflow glitches */
* { min-width: 0; }
img, svg { max-width: 100%; height: auto; }

/* Enable momentum scroll in the snap container */
.snap-scroll {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Se serve anche per i contenitori scrollabili interni */
.scrollable-container {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; /* Per un migliore scrolling su dispositivi mobili */
  height: 100%;
}

/* Glass + glow system */
.glass-surface {
  background: rgb(var(--color-surface-rgb) / 0.78);
  border-color: var(--color-border);
  -webkit-backdrop-filter: blur(18px) saturate(120%);
  backdrop-filter: blur(18px) saturate(120%);
  box-shadow: 0 10px 30px -12px rgba(0, 0, 0, 0.12);
}

.glow-before {
  background: radial-gradient(60% 60% at 50% 40%, rgba(var(--color-primary-rgb) / 0.25), rgba(239 174 162 / 0.15), transparent 60%);
  filter: blur(16px);
  pointer-events: none;
}

/* Subtle component entrance */
.reveal-in {
  animation: revealIn 600ms cubic-bezier(.2,.8,.2,1) both;
}
@keyframes revealIn {
  from { opacity: 0; transform: translateY(-6px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* Menu appear stagger */
.menu-container-appear { animation: fadeIn 150ms ease-out both; }
.menu-appear { animation: fadeGrow 300ms ease-out both; }
.menu-item { animation: slideFade 300ms ease-out both; }
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes fadeGrow {
  from { opacity: 0; transform: scale(0.96); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes slideFade {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Pressable micro-interaction */
.pressable { transition: transform 120ms ease, filter 200ms ease; }
.pressable:active { transform: translateY(1px) scale(0.98); filter: brightness(0.98); }

/* Hover raise */
.hover-raise { transition: transform 200ms ease, background-color 200ms ease, color 200ms ease; }
.hover-raise:hover { transform: translateY(-1px); }

/* Side rail items */
.side-rail { background: transparent; }
.rail-item {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 44px; height: 44px;
  margin: 4px auto;
  border-radius: 12px;
  color: rgb(var(--color-foreground-rgb) / 0.85);
  transition: color 200ms ease, background-color 200ms ease, transform 120ms ease;
}
.rail-item:hover { background: rgb(var(--color-foreground-rgb) / 0.06); color: var(--color-foreground); transform: translateY(-1px); }
.rail-item.active { color: var(--color-foreground); background: rgb(var(--color-foreground-rgb) / 0.08); }

/* Active indicator */
.indicator {
  position: absolute;
  left: -2px; top: 8px; bottom: 8px;
  width: 3px;
  border-radius: 9999px;
  background: linear-gradient(180deg, var(--color-primary-300), var(--color-primary-500));
  transition: transform 200ms ease, opacity 200ms ease;
}

/* Tooltips */
.nav-tooltip {
  position: absolute;
  left: calc(100% + 10px);
  top: 50%; transform: translateY(-50%);
  background: var(--color-foreground);
  color: var(--color-surface);
  font-size: 12px; line-height: 1;
  padding: 6px 8px;
  border-radius: 8px;
  opacity: 0; pointer-events: none;
  white-space: nowrap;
  box-shadow: 0 8px 24px -12px rgba(0,0,0,0.25);
  transform-origin: left center;
  transition: opacity 160ms ease, transform 160ms ease;
}
.rail-item:hover .nav-tooltip { opacity: 1; transform: translate(6px, -50%); }

/* Performance & polish */
.nav-tooltip { will-change: transform, opacity; }
.vt-page { will-change: transform, opacity; }

/* Mobile header backdrop tweak */
@media (max-width: 767px) {
  .side-rail { display: none; }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .reveal-in, .menu-appear, .menu-item, .hover-raise, .pressable { animation: none !important; transition: none !important; }
}

/* Suppress transitions right after route swap */
.route-swap *, .route-swap {
  transition: none !important;
  animation: none !important;
}